var c=($,v,o)=>new Promise((p,g)=>{var e=u=>{try{b(o.next(u))}catch(a){g(a)}},m=u=>{try{b(o.throw(u))}catch(a){g(a)}},b=u=>u.done?p(u.value):Promise.resolve(u.value).then(e,m);b((o=o.apply($,v)).next())});import{a0 as y,a4 as S,r as h,P as k,Q as N,R as n,Z as x,$ as t,U as i,X as w,aG as U,Y as z,as as F}from"./index-e858760b.js";import{_ as B,a as r,N as I}from"./CommonPage-7f9158f9.js";import{N as d}from"./Input-dbf813c2.js";import{_ as R}from"./Switch-7ba8866e.js";import{_ as C}from"./InputNumber-e7a9cb3c.js";import"./format-length-c9d165c6.js";import"./use-locale-aaabd27b.js";import"./AppPage-280c836e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Remove-c53adcb6.js";import"./Add-bcf4f7e7.js";const V={class:"m-30 flex items-center"},A={__name:"index",setup($){const{t:v}=y(),o=S(),p=h(!1),g=h(null),e=h({enable_storage:o.storageSetting.enable_storage,max_size:o.storageSetting.max_size,timeout_time:o.storageSetting.timeout_time,endpoint:o.storageSetting.endpoint,region:o.storageSetting.region,access_id:o.storageSetting.access_id,secret_key:o.storageSetting.secret_key,bucket:o.storageSetting.bucket,path:o.storageSetting.path,prefix:o.storageSetting.prefix,suffix:o.storageSetting.suffix});function m(a){return c(this,null,function*(){var l;p.value=!0,(l=g.value)==null||l.validate(f=>c(this,null,function*(){if(!f){var _=o.totalSetting;_.storage=e.value,yield F.updateSetting(_).then(()=>{o.setStorageSetting(e.value),p.value=!1,a&&$message.success(v("common.text.save_success"))}).catch(()=>{p.value=!1})}}))})}const b={};function u(a){$message.success(v(a?"views.setting.label_enable_storage":"views.setting.label_disable_storage")),m(!1)}return(a,l)=>{const f=R,_=C;return k(),N(B,{title:a.$t("views.setting.label_storage_setting")},{default:n(()=>[x("div",V,[t(i(I),{ref_key:"infoFormRef",ref:g,"label-placement":"top","label-align":"left","label-width":"100",model:e.value,rules:b,class:"w-500"},{default:n(()=>[t(i(r),{label:a.$t("views.setting.label_enable_storage"),path:"enable_storage"},{default:n(()=>[t(f,{value:e.value.enable_storage,"onUpdate:value":[l[0]||(l[0]=s=>e.value.enable_storage=s),u],clearable:""},null,8,["value"])]),_:1},8,["label"]),t(i(r),{label:a.$t("views.setting.label_max_size"),path:"max_size"},{default:n(()=>[t(_,{precision:2,disabled:!e.value.enable_storage,placeholder:a.$t("views.setting.placeholder_max_size"),value:e.value.max_size,"onUpdate:value":l[1]||(l[1]=s=>e.value.max_size=s),"w-500":""},{suffix:n(()=>[w(" MB ")]),_:1},8,["disabled","placeholder","value"])]),_:1},8,["label"]),t(i(r),{label:a.$t("views.setting.label_timeout_time"),path:"timeout_time"},{default:n(()=>[t(_,{precision:0,disabled:!e.value.enable_storage,placeholder:a.$t("views.setting.placeholder_timeout_time"),value:e.value.timeout_time,"onUpdate:value":l[2]||(l[2]=s=>e.value.timeout_time=s),"w-500":""},{suffix:n(()=>[w(" ç§’ ")]),_:1},8,["disabled","placeholder","value"])]),_:1},8,["label"]),t(i(r),{label:a.$t("views.setting.label_endpoint"),path:"endpoint"},{default:n(()=>[t(i(d),{value:e.value.endpoint,"onUpdate:value":l[3]||(l[3]=s=>e.value.endpoint=s),type:"text",placeholder:a.$t("views.setting.placeholder_endpoint"),disabled:!e.value.enable_storage,clearable:""},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),t(i(r),{label:a.$t("views.setting.label_region"),path:"region"},{default:n(()=>[t(i(d),{value:e.value.region,"onUpdate:value":l[4]||(l[4]=s=>e.value.region=s),type:"text",placeholder:a.$t("views.setting.placeholder_region"),disabled:!e.value.enable_storage,clearable:""},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),t(i(r),{label:a.$t("views.setting.label_access_id"),path:"access_id"},{default:n(()=>[t(i(d),{value:e.value.access_id,"onUpdate:value":l[5]||(l[5]=s=>e.value.access_id=s),type:"text",placeholder:a.$t("views.setting.placeholder_access_id"),disabled:!e.value.enable_storage,clearable:""},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),t(i(r),{label:a.$t("views.setting.label_secret_key"),path:"secret_key"},{default:n(()=>[t(i(d),{value:e.value.secret_key,"onUpdate:value":l[6]||(l[6]=s=>e.value.secret_key=s),type:"text",placeholder:a.$t("views.setting.placeholder_secret_key"),disabled:!e.value.enable_storage,clearable:""},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),t(i(r),{label:a.$t("views.setting.label_bucket"),path:"bucket"},{default:n(()=>[t(i(d),{value:e.value.bucket,"onUpdate:value":l[7]||(l[7]=s=>e.value.bucket=s),type:"text",placeholder:a.$t("views.setting.placeholder_bucket"),disabled:!e.value.enable_storage,clearable:""},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),t(i(r),{label:a.$t("views.setting.label_path"),path:"path"},{default:n(()=>[t(i(d),{value:e.value.path,"onUpdate:value":l[8]||(l[8]=s=>e.value.path=s),type:"text",placeholder:a.$t("views.setting.placeholder_path",{path:"/{year}/{month}/{timestamp}_{filename}"}),disabled:!e.value.enable_storage,clearable:""},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),t(i(r),{label:a.$t("views.setting.label_prefix"),path:"prefix"},{default:n(()=>[t(i(d),{value:e.value.prefix,"onUpdate:value":l[9]||(l[9]=s=>e.value.prefix=s),type:"text",placeholder:a.$t("views.setting.placeholder_prefix"),disabled:!e.value.enable_storage,clearable:""},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),t(i(U),{type:"primary",loading:p.value,onClick:l[10]||(l[10]=s=>m(!0))},{default:n(()=>[w(z(a.$t("common.buttons.save")),1)]),_:1},8,["loading"])]),_:1},8,["model"])])]),_:1},8,["title"])}}};export{A as default};
