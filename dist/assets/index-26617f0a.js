var w=(c,g,o)=>new Promise((m,r)=>{var p=_=>{try{d(o.next(_))}catch(t){r(t)}},e=_=>{try{d(o.throw(_))}catch(t){r(t)}},d=_=>_.done?m(_.value):Promise.resolve(_.value).then(p,e);d((o=o.apply(c,g)).next())});import{a0 as S,a4 as N,r as b,as as $,P as U,Q as y,R as s,Z as x,$ as a,U as n,aG as z,X as F,Y as k}from"./index-71df545f.js";import{_ as B,a as u,N as R}from"./CommonPage-bbca3a22.js";import{_ as V}from"./InputNumber-41b056e8.js";import{N as h}from"./Input-7bf44288.js";import{_ as C}from"./Select-26e3d3e9.js";import{_ as I}from"./Switch-2e7c769b.js";import"./format-length-c9d165c6.js";import"./use-locale-b5fb7986.js";import"./AppPage-90bf1bc9.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Remove-20a30d7f.js";import"./Add-af88e723.js";import"./Tag-ef52fed7.js";import"./Popover-3620166f.js";const O={class:"m-30 flex items-center"},K={__name:"index",setup(c){const{t:g}=S(),o=N(),m=b(!1),r=b([]),p=b(null),e=b({page_size:o.contentSetting.page_size,thumbnail_suffix:o.contentSetting.thumbnail_suffix,detail_suffix:o.contentSetting.detail_suffix,order_option:o.contentSetting.order_option,thumbnail_show_location:o.contentSetting.thumbnail_show_location,detail_show_location:o.contentSetting.detail_show_location,thumbnail_show_time:o.contentSetting.thumbnail_show_time,thumbnail_time_format:o.contentSetting.thumbnail_time_format,detail_show_time:o.contentSetting.detail_show_time,detail_time_format:o.contentSetting.detail_time_format});function d(){return w(this,null,function*(){var t;m.value=!0,(t=p.value)==null||t.validate(l=>w(this,null,function*(){if(!l){var f=o.totalSetting;f.content=e.value,yield $.updateSetting(f).then(()=>{o.setContentSetting(e.value),m.value=!1,$message.success(g("common.text.update_success"))}).catch(()=>{m.value=!1})}}))})}const _={};return $.getOrderOptionVisitor().then(t=>{t.code==200&&(r.value=t.data.map(l=>JSON.parse(l)))}),(t,l)=>{const f=C,v=I;return U(),y(B,{title:t.$t("views.setting.label_content_setting")},{default:s(()=>[x("div",O,[a(n(R),{ref_key:"infoFormRef",ref:p,"label-placement":"top","label-align":"left","label-width":"100",model:e.value,rules:_,class:"w-500"},{default:s(()=>[a(n(u),{label:t.$t("views.setting.label_page_size"),path:"page_size"},{default:s(()=>[a(n(V),{clearable:"",precision:0,placeholder:t.$t("views.setting.placeholder_page_size"),value:e.value.page_size,"onUpdate:value":l[0]||(l[0]=i=>e.value.page_size=i)},null,8,["placeholder","value"])]),_:1},8,["label"]),a(n(u),{label:t.$t("views.setting.label_thumbnail_suffix"),path:"thumbnail_suffix"},{default:s(()=>[a(n(h),{value:e.value.thumbnail_suffix,"onUpdate:value":l[1]||(l[1]=i=>e.value.thumbnail_suffix=i),type:"text",placeholder:t.$t("views.setting.placeholder_thumbnail_suffix"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),a(n(u),{label:t.$t("views.setting.label_detail_suffix"),path:"detail_suffix"},{default:s(()=>[a(n(h),{value:e.value.detail_suffix,"onUpdate:value":l[2]||(l[2]=i=>e.value.detail_suffix=i),type:"text",placeholder:t.$t("views.setting.placeholder_detail_suffix"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),a(n(u),{label:t.$t("views.setting.label_order_option"),path:"order_option"},{default:s(()=>[a(f,{value:e.value.order_option,"onUpdate:value":l[3]||(l[3]=i=>e.value.order_option=i),options:r.value},null,8,["value","options"])]),_:1},8,["label"]),a(n(u),{label:t.$t("views.setting.label_thumbnail_show_location"),path:"thumbnail_show_location"},{default:s(()=>[a(v,{value:e.value.thumbnail_show_location,"onUpdate:value":l[4]||(l[4]=i=>e.value.thumbnail_show_location=i)},null,8,["value"])]),_:1},8,["label"]),a(n(u),{label:t.$t("views.setting.label_detail_show_location"),path:"detail_show_location"},{default:s(()=>[a(v,{value:e.value.detail_show_location,"onUpdate:value":l[5]||(l[5]=i=>e.value.detail_show_location=i)},null,8,["value"])]),_:1},8,["label"]),a(n(u),{label:t.$t("views.setting.label_thumbnail_show_time"),path:"thumbnail_show_time"},{default:s(()=>[a(v,{value:e.value.thumbnail_show_time,"onUpdate:value":l[6]||(l[6]=i=>e.value.thumbnail_show_time=i)},null,8,["value"])]),_:1},8,["label"]),a(n(u),{label:t.$t("views.setting.label_thumbnail_time_format"),path:"thumbnail_time_format"},{default:s(()=>[a(n(h),{value:e.value.thumbnail_time_format,"onUpdate:value":l[7]||(l[7]=i=>e.value.thumbnail_time_format=i),type:"text",disabled:!e.value.thumbnail_show_time,placeholder:t.$t("views.setting.placeholder_thumbnail_time_format"),clearable:""},null,8,["value","disabled","placeholder"])]),_:1},8,["label"]),a(n(u),{label:t.$t("views.setting.label_detail_show_time"),path:"detail_show_time"},{default:s(()=>[a(v,{value:e.value.detail_show_time,"onUpdate:value":l[8]||(l[8]=i=>e.value.detail_show_time=i)},null,8,["value"])]),_:1},8,["label"]),a(n(u),{label:t.$t("views.setting.label_detail_time_format"),path:"detail_time_format"},{default:s(()=>[a(n(h),{value:e.value.detail_time_format,"onUpdate:value":l[9]||(l[9]=i=>e.value.detail_time_format=i),type:"text",disabled:!e.value.detail_show_time,placeholder:t.$t("views.setting.placeholder_detail_time_format"),clearable:""},null,8,["value","disabled","placeholder"])]),_:1},8,["label"]),a(n(z),{type:"primary",loading:m.value,onClick:d},{default:s(()=>[F(k(t.$t("common.buttons.update")),1)]),_:1},8,["loading"])]),_:1},8,["model"])])]),_:1},8,["title"])}}};export{K as default};
