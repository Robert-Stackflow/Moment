var _=(b,p,a)=>new Promise((u,i)=>{var l=e=>{try{c(a.next(e))}catch(t){i(t)}},v=e=>{try{c(a.throw(e))}catch(t){i(t)}},c=e=>e.done?u(e.value):Promise.resolve(e.value).then(l,v);c((a=a.apply(b,p)).next())});import{a0 as f,a4 as h,r as g,P as w,Q as k,R as r,Z as $,$ as o,U as n,aG as S,X as y,Y as N,as as j}from"./index-07a98a1f.js";import{_ as F,a as m,N as U}from"./CommonPage-ba2636bf.js";import{N as d}from"./Input-187c70b5.js";import"./format-length-c9d165c6.js";import"./use-locale-33ac5cb9.js";import"./AppPage-26fa9560.js";import"./_plugin-vue_export-helper-c27b6911.js";const B={class:"m-30 flex items-center"},P={__name:"index",setup(b){const{t:p}=f(),a=h(),u=g(!1),i=g(null),l=g({workbench_title:a.generalSetting.workbench_title,workbench_desc:a.generalSetting.workbench_desc,custom_css:a.generalSetting.custom_css,custom_js:a.generalSetting.custom_js});function v(){return _(this,null,function*(){var e;u.value=!0,(e=i.value)==null||e.validate(t=>_(this,null,function*(){if(!t){var s=a.totalSetting;s.general=l.value,yield j.updateSetting(s).then(()=>{a.setGeneralSetting(l.value),u.value=!1,$message.success(p("common.text.save_success"))}).catch(()=>{u.value=!1})}}))})}const c={};return(e,t)=>(w(),k(F,{title:e.$t("views.setting.label_general_setting")},{default:r(()=>[$("div",B,[o(n(U),{ref_key:"infoFormRef",ref:i,"label-placement":"top","label-align":"left","label-width":"100",model:l.value,rules:c,class:"w-500"},{default:r(()=>[o(n(m),{label:e.$t("views.setting.label_workbench_title"),path:"workbench_title"},{default:r(()=>[o(n(d),{value:l.value.workbench_title,"onUpdate:value":t[0]||(t[0]=s=>l.value.workbench_title=s),type:"text",placeholder:e.$t("views.setting.placeholder_workbench_title",{username:"{username}"})},null,8,["value","placeholder"])]),_:1},8,["label"]),o(n(m),{label:e.$t("views.setting.label_workbench_desc"),path:"workbench_desc"},{default:r(()=>[o(n(d),{value:l.value.workbench_desc,"onUpdate:value":t[1]||(t[1]=s=>l.value.workbench_desc=s),type:"text",placeholder:e.$t("views.setting.placeholder_workbench_desc",{username:"{username}"})},null,8,["value","placeholder"])]),_:1},8,["label"]),o(n(m),{label:e.$t("views.setting.label_custom_css"),path:"custom_css"},{default:r(()=>[o(n(d),{value:l.value.custom_css,"onUpdate:value":t[2]||(t[2]=s=>l.value.custom_css=s),type:"textarea",placeholder:e.$t("views.setting.placeholder_custom_css")},null,8,["value","placeholder"])]),_:1},8,["label"]),o(n(m),{label:e.$t("views.setting.label_custom_js"),path:"custom_js"},{default:r(()=>[o(n(d),{value:l.value.custom_js,"onUpdate:value":t[3]||(t[3]=s=>l.value.custom_js=s),type:"textarea",placeholder:e.$t("views.setting.placeholder_custom_js")},null,8,["value","placeholder"])]),_:1},8,["label"]),o(n(S),{type:"primary",loading:u.value,onClick:v},{default:r(()=>[y(N(e.$t("common.buttons.save")),1)]),_:1},8,["loading"])]),_:1},8,["model"])])]),_:1},8,["title"]))}};export{P as default};
